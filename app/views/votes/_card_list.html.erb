<%# Logic: Identify leading game for special highlighting %>
<% is_leader = game_iteration.index == 0 && game.votes > 0 %>

<div id="<%= dom_id game %>" class="group/card bg-slate-900 rounded-lg border transition-all duration-300 p-3 grid grid-cols-12 items-center gap-4 <%= is_leader ? 'border-yellow-500/50 ring-1 ring-yellow-500/20' : 'border-slate-800 hover:border-slate-700' %>">
  
  <%# Game Information (spans 10 columns) %>
  <div class="col-span-10 flex flex-col justify-center gap-1">
    <h3 class="font-bold text-md leading-tight group-hover/card:text-purple-400 transition-colors truncate flex items-center gap-2">
      <%= game.name %>
      <% if is_leader %>
        <span class="inline-flex bg-yellow-500 text-slate-950 p-0.5 rounded-full" title="Leading">
          <%= heroicon "star", variant: :outline, options: { class: "w-3 h-3" } %>
        </span>
      <% end %>
    </h3>
    
    <div class="flex flex-wrap items-center gap-3">
      <% if game.tags.any? %>
        <div class="flex flex-wrap gap-1">
          <% game.tags.each do |tag| %>
            <span class="text-xs text-purple-300 font-bold bg-purple-600/20 border border-purple-500/30 px-2 py-0.5 rounded-md uppercase tracking-wider"><%= tag.name %></span>
          <% end %>
        </div>
      <% end %>

      <% if game.price.present? %>
        <div class="flex items-center gap-1.5 text-slate-400">
          <%= heroicon "tag", variant: :outline, options: { class: "w-3.5 h-3.5 text-purple-500" } %>
          <span class="text-xs font-medium"><%= game.price %></span>
        </div>
      <% end %>
      <% if game.max_players.present? %>
        <div class="flex items-center gap-1.5 text-slate-400">
          <%= heroicon "user-group", variant: :outline, options: { class: "w-3.5 h-3.5 text-blue-500" } %>
          <span class="text-xs font-medium"><%= game.max_players %> Max</span>
        </div>
      <% end %>
    </div>
  </div>

  <%# Vote Controls (spans 2 columns) %>
  <div class="col-span-2 justify-self-end flex flex-row items-center bg-slate-950 border border-slate-800 py-1 px-3 rounded-xl gap-3">
    <%= button_to vote_vote_path(game, direction: 'up'), method: :post, class: "p-1 hover:text-green-400 transition-colors group/up" do %>
      <%= heroicon "chevron-up", variant: :outline, options: { class: "w-5 h-5 group-active/up:scale-90 transition-transform" } %>
    <% end %>
    
    <span class="text-base font-black text-white min-w-6 text-center"><%= game.votes %></span>
    
    <%= button_to vote_vote_path(game, direction: 'down'), method: :post, class: "p-1 hover:text-red-400 transition-colors group/down" do %>
      <%= heroicon "chevron-down", variant: :outline, options: { class: "w-5 h-5 group-active/down:scale-90 transition-transform" } %>
    <% end %>
  </div>
</div>
