<%= turbo_frame_tag user do %>
  <div class="p-4 bg-slate-800/50 rounded-2xl border border-slate-700/50 flex items-center justify-between gap-4 group hover:bg-slate-800/70 transition-colors mb-3">
    <div class="flex items-center gap-3 flex-1 min-w-0">
      <!-- Avatar -->
      <div class="w-10 h-10 rounded-full bg-gradient-to-br <%= user.host? ? 'from-amber-500 to-orange-600' : 'from-slate-600 to-slate-700' %> flex items-center justify-center flex-shrink-0 shadow-lg">
        <span class="text-white font-bold text-sm"><%= user.name.first.upcase %></span>
      </div>

      <!-- Name & Role -->
      <div class="min-w-0 flex-1">
          <div class="flex items-center gap-2">
          <span class="font-semibold text-white truncate"><%= user.name %></span>
          <% if user == current_user %>
              <span class="text-[10px] px-1.5 py-0.5 rounded bg-purple-500/20 text-purple-300 uppercase font-bold">You</span>
          <% end %>
          </div>
          <div class="flex items-center gap-2 mt-0.5">
          <% if user.host? %>
              <span class="text-[10px] px-1.5 py-0.5 rounded bg-amber-500/20 text-amber-300 uppercase font-bold flex items-center gap-1">
              <%= heroicon "star", variant: :mini, options: { class: "w-3 h-3" } %>
              Host
              </span>
          <% else %>
              <span class="text-[10px] px-1.5 py-0.5 rounded bg-slate-600/50 text-slate-400 uppercase font-bold">Player</span>
          <% end %>
          <% if local_assigns[:error] %>
              <span class="text-red-400 text-[10px] font-bold ml-2"><%= error %></span>
          <% end %>
          </div>
      </div>
    </div>

    <!-- Actions -->
    <% if user != current_user %>
      <div class="flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity">
          <% if user.player? %>
            <%= button_to promote_player_path(user), method: :patch, class: "p-2 text-amber-400 hover:text-amber-300 hover:bg-amber-500/10 rounded-xl transition-all cursor-pointer", title: "Make Host", form: { data: { turbo_frame: dom_id(user) } } do %>
                <%= heroicon "star", variant: :outline, options: { class: "w-5 h-5" } %>
            <% end %>
          <% else %>
            <% if Current.game_session.users.host.count > 1 %>
                <%= button_to demote_player_path(user), method: :patch, class: "p-2 text-slate-400 hover:text-slate-300 hover:bg-slate-600/50 rounded-xl transition-all cursor-pointer", title: "Demote to Player", form: { data: { turbo_frame: dom_id(user) } } do %>
                <%= heroicon "arrow-down-circle", variant: :outline, options: { class: "w-5 h-5" } %>
                <% end %>
            <% end %>
          <% end %>

          <%= button_to player_path(user), method: :delete, class: "p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-xl transition-all cursor-pointer", title: "Remove Player", form: { data: { turbo_confirm: "Remove #{user.name} from this session?", turbo_frame: dom_id(user) } } do %>
          <%= heroicon "trash", variant: :outline, options: { class: "w-5 h-5" } %>
          <% end %>
      </div>
    <% end %>
  </div>
<% end %>
