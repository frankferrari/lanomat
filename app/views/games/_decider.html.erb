<div class="flex flex-col items-center justify-center space-y-8 py-10" 
     data-controller="wheel">
    <%= turbo_stream_from "games_wheel_data" %>
    <%= render "games/wheel_data", games: @games %>

    
    <div class="text-center space-y-2">
        <h2 class="text-3xl font-black tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500">
            THE DECIDER
        </h2>
        <div class="flex justify-center gap-2 bg-slate-900 p-1 rounded-full border border-slate-800">
            <button
                type="button"
                data-action="wheel#filter"
                data-filter="top5"
                class="px-4 py-1 rounded-full text-[10px] font-black tracking-widest transition-all bg-purple-600 text-white"
            >
                TOP 5 VOTED
            </button>
            <button
                type="button"
                data-action="wheel#filter"
                data-filter="all"
                class="px-4 py-1 rounded-full text-[10px] font-black tracking-widest transition-all text-slate-500"
            >
                ALL GAMES
            </button>
        </div>
    </div>

    <div class="relative">
        <div class="absolute top-0 left-1/2 -translate-x-1/2 -mt-4 w-0 h-0 border-l-[15px] border-l-transparent border-r-[15px] border-r-transparent border-t-[30px] border-t-white z-10 filter drop-shadow-[0_0_10px_rgba(255,255,255,0.5)]"></div>
        <div class="p-4 rounded-full bg-slate-900 border-8 border-slate-800 shadow-2xl transition-all duration-300" data-wheel-target="container">
            <canvas data-wheel-target="canvas" class="max-w-[85vw] sm:max-w-md h-auto rounded-full" style="width: 450px; height: 450px;"></canvas>
            <button
                type="button"
                data-action="wheel#spin"
                data-wheel-target="spinButton"
                class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-16 h-16 rounded-full bg-purple-600 hover:bg-purple-500 flex items-center justify-center text-white shadow-xl disabled:opacity-50 z-20"
            >
                <div data-wheel-target="playIcon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-play w-8 h-8 ml-1"><polygon points="6 3 20 12 6 21 6 3"/></svg>
                </div>
                <div data-wheel-target="spinIcon" class="hidden">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-rotate-ccw w-8 h-8 animate-spin"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 12"/><path d="M3 3v9h9"/></svg>
                </div>
            </button>
        </div>
    </div>

    <div data-wheel-target="winnerDisplay" class="hidden bg-slate-900 p-8 rounded-3xl border-2 border-green-500 shadow-2xl text-center max-w-sm w-full">
        <p class="text-green-400 text-[10px] font-black uppercase tracking-widest mb-2">Selected Game</p>
        <h3 data-wheel-target="winnerName" class="text-4xl font-black mb-1"></h3>
        <p data-wheel-target="winnerMeta" class="text-slate-400 text-sm mb-6"></p>
        <button
            type="button"
            data-action="wheel#dismissWinner"
            class="w-full py-4 bg-green-600 hover:bg-green-500 text-white font-black rounded-xl transition-all shadow-lg active:scale-95 uppercase tracking-widest"
        >
            Ready to Rumble
        </button>
    </div>
</div>
