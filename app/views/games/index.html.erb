<%= turbo_stream_from "games" %>

<div class="min-h-screen bg-slate-950 text-slate-100 font-sans selection:bg-purple-500/30 pb-20">
    <header class="border-b border-slate-800 bg-slate-900/50 backdrop-blur-md sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 h-16 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <div class="bg-purple-600 p-2 rounded-lg shadow-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-white">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 18.75h-9m9 0a3 3 0 013 3h-15a3 3 0 013-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0V5.625a2.625 2.625 0 11-5.25 0v2.875M6.75 6.75h.75q.75 0 .75-.75t-.75-.75h-.75A2.25 2.25 0 004.5 7.5v1.5a2.25 2.25 0 002.25 2.25M17.25 6.75h-.75q-.75 0-.75-.75t.75-.75h.75A2.25 2.25 0 0119.5 7.5v1.5a2.25 2.25 0 01-2.25 2.25" />
                    </svg>
                </div>
                <h1 class="font-bold text-xl tracking-tight hidden sm:block">LAN-O-MAT</h1>
            </div>

            <nav class="flex bg-slate-800/50 p-1 rounded-xl border border-slate-700">
                <%= link_to games_path(tab: 'vote'), data: { turbo_frame: "tab_content" }, class: "px-3 py-1.5 rounded-lg text-sm font-medium transition-all flex items-center gap-2 #{ @active_tab == 'vote' ? 'bg-purple-600 text-white shadow-lg' : 'text-slate-400 hover:text-slate-200' }" do %>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 18.75h-9m9 0a3 3 0 013 3h-15a3 3 0 013-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0V5.625a2.625 2.625 0 11-5.25 0v2.875M6.75 6.75h.75q.75 0 .75-.75t-.75-.75h-.75A2.25 2.25 0 004.5 7.5v1.5a2.25 2.25 0 002.25 2.25M17.25 6.75h-.75q-.75 0-.75-.75t.75-.75h.75A2.25 2.25 0 0119.5 7.5v1.5a2.25 2.25 0 01-2.25 2.25" />
                    </svg>
                    <span class="hidden sm:inline">Voting</span>
                <% end %>

                <%= link_to games_path(tab: 'wheel'), data: { turbo_frame: "tab_content" }, class: "px-3 py-1.5 rounded-lg text-sm font-medium transition-all flex items-center gap-2 #{ @active_tab == 'wheel' ? 'bg-purple-600 text-white shadow-lg' : 'text-slate-400 hover:text-slate-200' }" do %>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M14.25 6.087c0-.355.186-.676.401-.959.221-.29.349-.634.349-1.003 0-1.036-1.007-1.875-2.25-1.875s-2.25.84-2.25 1.875c0 .369.128.713.349 1.003.215.283.401.604.401.959v0a.64.64 0 01-.657.643 4.83 4.83 0 00-4.163-.3c.187 1.613.293 3.25.315 4.907a.656.656 0 01-.658.663v0c-.355 0-.676-.186-.959-.401a4.15 4.15 0 00-1.003-.349C3.089 11.25 2.25 12.257 2.25 13.5c0 1.243.84 2.25 1.875 2.25.369 0 .713-.128 1.003-.349.283-.215.604-.401.959-.401v0c.31 0 .555.26.532.57-.126 1.711-.341 3.398-.642 5.056.1.181.209.359.324.532a1.88 1.88 0 01.401.959v0a2.25 2.25 0 001.95 2.138c.621.036 1.125-.456 1.125-1.077v0c0-.355-.186-.676-.401-.959a4.15 4.15 0 00-.349-1.003c0-1.035 1.008-1.875 2.25-1.875 1.243 0 2.25.84 2.25 1.875 0 .369-.128.713-.349 1.003-.215.283-.401.604-.401.959v0c0 .62.504 1.113 1.125 1.077a16.85 16.85 0 001.95-2.138c.115-.173.224-.351.324-.532a18.3 18.3 0 00-.642-5.056.562.562 0 01.532-.57v0c.355 0 .676.186.959.401.29.221.634.349 1.003.349 1.035 0 1.875-1.007 1.875-2.25s-.84-2.25-1.875-2.25a4.15 4.15 0 00-1.003.349c-.283.215-.604.401-.959.401v0c.005-.366.495-.663-.658-.663a18.9 18.9 0 00.315-4.907c-1.258.118-2.738.252-4.163.3a.64.64 0 01-.657-.643v0Z" />
                    </svg>
                    <span class="hidden sm:inline">Decider</span>
                <% end %>

                <%= link_to games_path(tab: 'manage'), data: { turbo_frame: "tab_content" }, class: "px-3 py-1.5 rounded-lg text-sm font-medium transition-all flex items-center gap-2 #{ @active_tab == 'manage' ? 'bg-purple-600 text-white shadow-lg' : 'text-slate-400 hover:text-slate-200' }" do %>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281Z" />
                      <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0Z" />
                    </svg>
                    <span class="hidden sm:inline">Manage</span>
                <% end %>
            </nav>

            <div class="flex items-center gap-2">
                <%= button_to reset_games_path, method: :post, class: "p-2 text-slate-400 hover:text-red-400 transition-colors bg-slate-800/50 rounded-lg border border-slate-700", title: "Reset All Votes", form: { data: { turbo_confirm: "Clear all votes for a new round?" } } do %>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99" />
                    </svg>
                <% end %>
            </div>
        </div>
    </header>

    <main class="max-w-6xl mx-auto p-4 sm:p-6 space-y-12">
        <%= turbo_frame_tag "tab_content" do %>
            <%= render @active_tab == 'wheel' ? 'decider' : (@active_tab == 'manage' ? 'manage' : 'voting') %>
        <% end %>
    </main>
</div>
