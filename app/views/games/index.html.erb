<%= turbo_stream_from "games" %>

<div class="min-h-screen bg-slate-950 text-slate-100 font-sans selection:bg-purple-500/30 pb-20">
    <header class="border-b border-slate-800 bg-slate-900/50 backdrop-blur-md sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 h-16 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <div class="bg-purple-600 p-2 rounded-lg shadow-lg">
                    <%= heroicon "trophy", variant: :outline, options: { class: "w-5 h-5 text-white" } %>
                </div>
                <h1 class="font-bold text-xl tracking-tight hidden sm:block">LAN-O-MAT</h1>
            </div>

            <nav class="flex bg-slate-800/50 p-1 rounded-xl border border-slate-700">
                <%= link_to games_path(tab: 'vote'), data: { turbo_frame: "tab_content" }, class: "px-3 py-1.5 rounded-lg text-sm font-medium transition-all flex items-center gap-2 #{ @active_tab == 'vote' ? 'bg-purple-600 text-white shadow-lg' : 'text-slate-400 hover:text-slate-200' }" do %>
                    <%= heroicon "trophy", variant: :outline, options: { class: "w-4 h-4" } %>
                    <span class="hidden sm:inline">Voting</span>
                <% end %>

                <%= link_to games_path(tab: 'wheel'), data: { turbo_frame: "tab_content" }, class: "px-3 py-1.5 rounded-lg text-sm font-medium transition-all flex items-center gap-2 #{ @active_tab == 'wheel' ? 'bg-purple-600 text-white shadow-lg' : 'text-slate-400 hover:text-slate-200' }" do %>
                    <%= heroicon "puzzle-piece", variant: :outline, options: { class: "w-4 h-4" } %>
                    <span class="hidden sm:inline">Decider</span>
                <% end %>

                <%= link_to games_path(tab: 'manage'), data: { turbo_frame: "tab_content" }, class: "px-3 py-1.5 rounded-lg text-sm font-medium transition-all flex items-center gap-2 #{ @active_tab == 'manage' ? 'bg-purple-600 text-white shadow-lg' : 'text-slate-400 hover:text-slate-200' }" do %>
                    <%= heroicon "cog-6-tooth", variant: :outline, options: { class: "w-4 h-4" } %>
                    <span class="hidden sm:inline">Manage</span>
                <% end %>
            </nav>

            <div class="flex items-center gap-2">
                <%= button_to reset_games_path, method: :post, class: "p-2 text-slate-400 hover:text-red-400 transition-colors bg-slate-800/50 rounded-lg border border-slate-700", title: "Reset All Votes", form: { data: { turbo_confirm: "Clear all votes for a new round?" } } do %>
                    <%= heroicon "arrow-path", variant: :outline, options: { class: "w-4 h-4" } %>
                <% end %>
            </div>
        </div>
    </header>

    <main class="max-w-6xl mx-auto p-4 sm:p-6 space-y-12">
        <%= turbo_frame_tag "tab_content" do %>
            <%= render @active_tab == 'wheel' ? 'games/wheel/index' : (@active_tab == 'manage' ? 'games/manage/index' : 'games/vote/index') %>
        <% end %>
    </main>
</div>
