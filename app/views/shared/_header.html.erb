<header class="border-b border-slate-800 bg-slate-900/50 backdrop-blur-md sticky top-0 z-50">
    <div class="max-w-6xl mx-auto px-4 h-16 flex items-center justify-between">
        <div class="flex items-center gap-2">
            <div class="bg-purple-600 p-2 rounded-lg shadow-lg">
                <%= heroicon "trophy", variant: :outline, options: { class: "w-5 h-5 text-white" } %>
            </div>
            <h1 class="font-bold text-xl tracking-tight hidden sm:block">LAN-O-MAT</h1>
        </div>

        <nav class="flex items-center gap-2">
            <div class="flex bg-slate-800/50 p-1 rounded-xl border border-slate-700">
                <%= link_to votes_path, class: "px-3 py-1.5 rounded-lg text-sm font-medium transition-all flex items-center gap-2 #{current_page?(votes_path) ? 'bg-purple-600 text-white shadow-lg' : 'text-slate-400 hover:text-slate-200'}" do %>
                    <%= heroicon "bolt", variant: :outline, options: { class: "w-4 h-4" } %>
                    <span class="hidden sm:inline">Voting</span>
                <% end %>
                <%= link_to games_path, class: "px-3 py-1.5 rounded-lg text-sm font-medium transition-all flex items-center gap-2 #{current_page?(games_path) ? 'bg-purple-600 text-white shadow-lg' : 'text-slate-400 hover:text-slate-200'}" do %>
                    <%= heroicon "puzzle-piece", variant: :outline, options: { class: "w-4 h-4" } %>
                    <span class="hidden sm:inline">Games</span>
                <% end %>
            </div>

            <% if current_user.host? %>
                <input type="checkbox" id="settings_modal_toggle" class="peer hidden">
                <div class="p-1 bg-slate-800/50 rounded-xl border border-slate-700 flex">
                    <label for="settings_modal_toggle" class="px-3 py-1.5 rounded-lg text-sm font-medium transition-all flex items-center gap-2 cursor-pointer text-slate-400 hover:text-slate-200 peer-checked:bg-purple-600 peer-checked:text-white peer-checked:shadow-lg" title="Settings">
                        <%= heroicon "adjustments-horizontal", variant: :outline, options: { class: "w-4 h-4" } %>
                        <span class="hidden sm:inline">Settings</span>
                    </label>
                </div>

                <!-- Settings Modal Overlay -->
                <div class="fixed inset-0 z-[100] hidden peer-checked:flex items-center justify-center p-4 sm:p-6 bg-slate-950/80 backdrop-blur-md overflow-y-auto">
                    <label for="settings_modal_toggle" class="fixed inset-0 cursor-default"></label>
                    <div class="relative w-full max-w-2xl bg-slate-900 border border-slate-800 rounded-[2.5rem] shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200 my-auto">
                        <%= render "settings/modal_form" %>
                    </div>
                </div>
            <% end %>
        </nav>

        <div class="flex items-center gap-4">
            <% if current_user %>
                <div class="hidden md:flex flex-col items-end mr-2">
                    <span class="text-xs text-slate-400 font-mono">CODE: <span class="text-white font-bold selection:bg-purple-500"><%= current_user.game_session.code %></span></span>
                    <div class="flex items-center gap-2">
                         <span class="text-sm font-medium text-white"><%= current_user.name %></span>
                         <span class="text-[10px] px-1.5 py-0.5 rounded bg-slate-700 text-slate-300 uppercase"><%= current_user.role %></span>
                    </div>
                </div>



                <%= button_to session_path, method: :delete, class: "p-2 text-slate-400 hover:text-white transition-colors", title: "Logout" do %>
                    <%= heroicon "arrow-right-on-rectangle", variant: :outline, options: { class: "w-5 h-5" } %>
                <% end %>
            <% end %>
        </div>
    </div>
</header>
